(function(){define("./services/Products",function(n,t,i){var r;return r=function(){function n(n,t){var r,i,u,f;this.breeze=n;this.logger=t;f="https://iwishuadata.azure-mobile.net/";u="Iwishua.Models";this.modelName="iwishuaproducts";i=new this.breeze.MetadataStore({namingConvention:this.breeze.NamingConvention.camelCase});r=new this.breeze.config.MetadataHelper(u);r.addTypeToStore(i,{namespace:u,shortName:this.modelName,defaultResourceName:this.modelName,dataProperties:{id:{maxLength:36},productId:{maxLength:36},productTitle:{maxLength:4e3},productDescription:{maxLength:4e3},productImageUrl:{maxLength:4e3},productBuyUrl:{maxLength:4e3},productKeywords:{maxLength:4e3},impressionUrl:{maxLength:4e3},isPublished:{dataType:this.breeze.DataType.Boolean}}});r.addDataService(i,f);this.entityManager=new this.breeze.EntityManager({metadataStore:i,serviceName:f})}return n.prototype.getProducts=function(n,t){var i;return n==null&&(n=0),t==null&&(t=5),i=this.breeze.EntityQuery.from("tables/"+this.modelName).skip(parseInt(n,10)).take(parseInt(t,10)).where("isPublished","eq",!0).inlineCount(!0),this.entityManager.executeQuery(i)["catch"](function(n){return function(t){n.logger.error(t.message,"Query failed");throw t;}}(this))},n.prototype.parseProducts=function(n,t){var i,r,u,l,e,o,s,a,v,h,c,f;for(n.count=t.results[0].count,n.products=t.results[0].results,h=n.products,f=[],o=0,a=h.length;o<a;o++){for(i=h[o],u=i.productTitle,u.slice(0,1)==='"'&&(u=u.slice(1,-1)),e=u.replace(/[-,.©®™]/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").split(/\s+/),u=e.join(" "),i.productTitle=u,r="";!(r.length>20||e.length===0);)r=e.pop()+" "+r.substr(0,1).toUpperCase()+r.substr(1);for(i.productName=r,i.className="ww2",c=r.split(/\s+/),s=0,v=c.length;s<v;s++)l=c[s],l.length>7&&(i.className="hh2");i.className==="ww2"?Math.floor(Math.random()*(new Date).getTime())&1?f.push(i.aligned="alignleft"):f.push(i.aligned="alignright"):f.push(void 0)}return f},n}(),i.exports=r})}).call(this);
/*
//# sourceMappingURL=Products.min.js.map
*/